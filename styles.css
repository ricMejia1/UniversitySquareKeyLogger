document.addEventListener('DOMContentLoaded', () => {
    const flashcards = [
        { word: '你好', translation: 'Hello' },
        { word: '谢谢', translation: 'Thank you' },
        // Add more flashcards here
    ];

    const flashcardContainer = document.getElementById('flashcard-container');

    flashcards.forEach(card => {
        const flashcard = document.createElement('div');
        flashcard.classList.add('flashcard');
        flashcard.innerHTML = `
            <p>${card.word}</p>
            <p>${card.translation}</p>
            <audio controls>
                <source src="path/to/${card.word}.mp3" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
            <button class="start-record-btn">Start Recording</button>
            <p class="status"></p>
            <p class="result"></p>
        `;
        flashcardContainer.appendChild(flashcard);
    });

    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = 'zh-CN'; // Chinese (Mandarin) Simplified
    recognition.interimResults = false;

    document.querySelectorAll('.start-record-btn').forEach((button, index) => {
        button.addEventListener('click', () => {
            recognition.start();
            const status = button.nextElementSibling;
            const result = status.nextElementSibling;
            recognition.onresult = (event) => {
                const speechResult = event.results[0][0].transcript;
                result.textContent = `You said: ${speechResult}`;
            };
            recognition.onspeechend = () => {
                recognition.stop();
            };
            recognition.onerror = (event) => {
                status.textContent = `Error occurred in recognition: ${event.error}`;
            };
        });
    });

    const quizQuestions = [
        {
            question: 'What does 你好 mean?',
            answers: [
                { text: 'Goodbye', correct: false },
                { text: 'Thank you', correct: false },
                { text: 'Hello', correct: true }
            ]
        },
        // Add more questions here
    ];

    let currentQuestionIndex = 0;

    function showQuestion(question) {
        const questionElement = document.getElementById('question');
        const answersElement = document.getElementById('answers');
        
        questionElement.textContent = question.question;
        answersElement.innerHTML = '';

        question.answers.forEach(answer => {
            const button = document.createElement('button');
            button.textContent = answer.text;
            button.addEventListener('click', () => {
                if (answer.correct) {
                    button.style.backgroundColor = 'green';
                } else {
                    button.style.backgroundColor = 'red';
                }
            });
            answersElement.appendChild(button);
        });
    }

    document.getElementById('next').addEventListener('click', () => {
        currentQuestionIndex++;
        if (currentQuestionIndex < quizQuestions.length) {
            showQuestion(quizQuestions[currentQuestionIndex]);
        } else {
            alert('You have completed the quiz!');
        }
    });

    showQuestion(quizQuestions[currentQuestionIndex]);
});
